{"ast":null,"code":"function imageExists(image_url) {\n  let http = new XMLHttpRequest();\n  http.open('HEAD', image_url, false);\n  http.send();\n  return http.status !== 404;\n}\n\nexport let loadPokemonsWithImages = (page, pageSize, sort, filter) => {\n  return loadPokemons(page, pageSize, sort, filter).then(data => {\n    if (!data) {\n      return [];\n    }\n\n    let promisesArray = data.pokemons.map(pokemon => {\n      debugger;\n      return loadImage(pokemon[\"name\"].toLowerCase()).then(image => {\n        let exist = imageExists(image);\n        debugger;\n        return exist ? { ...pokemon,\n          image\n        } : pokemon;\n      });\n    });\n    return Promise.all(promisesArray).then(pokemons => {\n      return {\n        pokemons: pokemons,\n        total_size: data.total_size\n      };\n    });\n  });\n};\n\nlet loadImage = name => {\n  return fetch(`/api/icon/${name}`).then(res => {\n    if (!res.ok) {\n      throw Error(res.statusText);\n    }\n\n    return res.text();\n  }).then(data => {\n    return data;\n  }).catch(err => {\n    console.log('Error occurred while loading image: ' + err);\n  });\n};\n\nexport let loadPokemons = (page, pageSize, sort, filter) => {\n  return fetch(`/api?page=${page}&pageSize=${pageSize}&sort=${sort}&filter=${filter}`).then(res => {\n    if (!res.ok) {\n      throw Error(res.statusText);\n    }\n\n    return res.json();\n  }).catch(err => {\n    console.log('Error occurred while loading image: ' + err);\n  });\n};","map":{"version":3,"names":["imageExists","image_url","http","XMLHttpRequest","open","send","status","loadPokemonsWithImages","page","pageSize","sort","filter","loadPokemons","then","data","promisesArray","pokemons","map","pokemon","loadImage","toLowerCase","image","exist","Promise","all","total_size","name","fetch","res","ok","Error","statusText","text","catch","err","console","log","json"],"sources":["C:/Users/yaelc/PycharmProjects/Pokedex/client/src/utils/loadData.js"],"sourcesContent":["\r\nfunction imageExists(image_url){\r\n\r\n    let http = new XMLHttpRequest();\r\n\r\n    http.open('HEAD', image_url, false);\r\n    http.send();\r\n\r\n    return http.status !== 404;\r\n\r\n}\r\n\r\nexport let loadPokemonsWithImages = (page,pageSize, sort, filter) => {\r\n       return loadPokemons(page,pageSize, sort, filter).then(data => {\r\n           if (!data) {\r\n               return []\r\n           }\r\n           let promisesArray = data.pokemons.map( pokemon => {\r\n               debugger\r\n                return loadImage(pokemon[\"name\"].toLowerCase()).then(image => {\r\n                    let exist = imageExists(image)\r\n                    debugger\r\n                    return exist ? {...pokemon, image}: pokemon;\r\n                });\r\n           })\r\n           return Promise.all(promisesArray).then(pokemons => {\r\n               return {pokemons: pokemons, total_size: data.total_size}\r\n           });\r\n      })\r\n}\r\nlet loadImage = (name) => {\r\n\r\n    return fetch(`/api/icon/${name}`)\r\n        .then((res) => {\r\n            if (!res.ok) {\r\n                throw Error(res.statusText)\r\n            }\r\n            return res.text()\r\n        })\r\n        .then((data) => {\r\n            return data\r\n        })\r\n        .catch((err) => {\r\n            console.log('Error occurred while loading image: ' + err)\r\n        })\r\n}\r\n\r\nexport let loadPokemons = ( page,pageSize, sort, filter) => {\r\n        return fetch(`/api?page=${page}&pageSize=${pageSize}&sort=${sort}&filter=${filter}`)\r\n        .then((res) => {\r\n            if (!res.ok) {\r\n                throw Error(res.statusText)\r\n            }\r\n\r\n            return res.json()\r\n        })\r\n        .catch((err) => {\r\n            console.log('Error occurred while loading image: ' + err)\r\n        })\r\n}\r\n"],"mappings":"AACA,SAASA,WAAT,CAAqBC,SAArB,EAA+B;EAE3B,IAAIC,IAAI,GAAG,IAAIC,cAAJ,EAAX;EAEAD,IAAI,CAACE,IAAL,CAAU,MAAV,EAAkBH,SAAlB,EAA6B,KAA7B;EACAC,IAAI,CAACG,IAAL;EAEA,OAAOH,IAAI,CAACI,MAAL,KAAgB,GAAvB;AAEH;;AAED,OAAO,IAAIC,sBAAsB,GAAG,CAACC,IAAD,EAAMC,QAAN,EAAgBC,IAAhB,EAAsBC,MAAtB,KAAiC;EAC9D,OAAOC,YAAY,CAACJ,IAAD,EAAMC,QAAN,EAAgBC,IAAhB,EAAsBC,MAAtB,CAAZ,CAA0CE,IAA1C,CAA+CC,IAAI,IAAI;IAC1D,IAAI,CAACA,IAAL,EAAW;MACP,OAAO,EAAP;IACH;;IACD,IAAIC,aAAa,GAAGD,IAAI,CAACE,QAAL,CAAcC,GAAd,CAAmBC,OAAO,IAAI;MAC9C;MACC,OAAOC,SAAS,CAACD,OAAO,CAAC,MAAD,CAAP,CAAgBE,WAAhB,EAAD,CAAT,CAAyCP,IAAzC,CAA8CQ,KAAK,IAAI;QAC1D,IAAIC,KAAK,GAAGtB,WAAW,CAACqB,KAAD,CAAvB;QACA;QACA,OAAOC,KAAK,GAAG,EAAC,GAAGJ,OAAJ;UAAaG;QAAb,CAAH,GAAwBH,OAApC;MACH,CAJM,CAAP;IAKJ,CAPmB,CAApB;IAQA,OAAOK,OAAO,CAACC,GAAR,CAAYT,aAAZ,EAA2BF,IAA3B,CAAgCG,QAAQ,IAAI;MAC/C,OAAO;QAACA,QAAQ,EAAEA,QAAX;QAAqBS,UAAU,EAAEX,IAAI,CAACW;MAAtC,CAAP;IACH,CAFM,CAAP;EAGJ,CAfO,CAAP;AAgBN,CAjBM;;AAkBP,IAAIN,SAAS,GAAIO,IAAD,IAAU;EAEtB,OAAOC,KAAK,CAAE,aAAYD,IAAK,EAAnB,CAAL,CACFb,IADE,CACIe,GAAD,IAAS;IACX,IAAI,CAACA,GAAG,CAACC,EAAT,EAAa;MACT,MAAMC,KAAK,CAACF,GAAG,CAACG,UAAL,CAAX;IACH;;IACD,OAAOH,GAAG,CAACI,IAAJ,EAAP;EACH,CANE,EAOFnB,IAPE,CAOIC,IAAD,IAAU;IACZ,OAAOA,IAAP;EACH,CATE,EAUFmB,KAVE,CAUKC,GAAD,IAAS;IACZC,OAAO,CAACC,GAAR,CAAY,yCAAyCF,GAArD;EACH,CAZE,CAAP;AAaH,CAfD;;AAiBA,OAAO,IAAItB,YAAY,GAAG,CAAEJ,IAAF,EAAOC,QAAP,EAAiBC,IAAjB,EAAuBC,MAAvB,KAAkC;EACpD,OAAOgB,KAAK,CAAE,aAAYnB,IAAK,aAAYC,QAAS,SAAQC,IAAK,WAAUC,MAAO,EAAtE,CAAL,CACNE,IADM,CACAe,GAAD,IAAS;IACX,IAAI,CAACA,GAAG,CAACC,EAAT,EAAa;MACT,MAAMC,KAAK,CAACF,GAAG,CAACG,UAAL,CAAX;IACH;;IAED,OAAOH,GAAG,CAACS,IAAJ,EAAP;EACH,CAPM,EAQNJ,KARM,CAQCC,GAAD,IAAS;IACZC,OAAO,CAACC,GAAR,CAAY,yCAAyCF,GAArD;EACH,CAVM,CAAP;AAWP,CAZM"},"metadata":{},"sourceType":"module"}