{"ast":null,"code":"let loadAllPokemons = () => {\n  return fetch(`/api/`).then(res => {\n    if (!res.ok) {\n      throw Error(res.statusText);\n    }\n\n    return res.text();\n  }).then(data => {\n    return JSON.parse(data);\n  }).catch(err => {\n    console.log('Error occurred while loading pokemons: ' + err);\n  });\n};\n\nlet loadImage = name => {\n  return fetch(`/api/icon/${name}`).then(res => {\n    if (!res.ok) {\n      throw Error(res.statusText);\n    }\n\n    return res.text();\n  }).then(data => {\n    return data;\n  }).catch(err => {\n    console.log('Error occurred while loading image: ' + err);\n  });\n};\n\nexport let loadPokemonsWithImages = name => {\n  return loadAllPokemons().then(data => {\n    let promisesArray = data.map(pokemon => {\n      return loadImage(pokemon[\"name\"].toLowerCase()).then(url => {\n        let image = null;\n        const isExist = checkImage(url);\n\n        if (isExist) {\n          debugger;\n          image = url;\n        }\n\n        return { ...pokemon,\n          image\n        };\n      });\n    });\n    return Promise.all(promisesArray);\n  });\n};\nexport let checkImage = url => {\n  const request = new XMLHttpRequest();\n  request.open(\"GET\", url, true);\n  request.send();\n  return request.onload = () => {\n    return request.status === 200;\n  };\n};","map":{"version":3,"names":["loadAllPokemons","fetch","then","res","ok","Error","statusText","text","data","JSON","parse","catch","err","console","log","loadImage","name","loadPokemonsWithImages","promisesArray","map","pokemon","toLowerCase","url","image","isExist","checkImage","Promise","all","request","XMLHttpRequest","open","send","onload","status"],"sources":["C:/Users/yaelc/PycharmProjects/Pokedex/client/src/utils/loadData.js"],"sourcesContent":["let loadAllPokemons = () => {\r\n    return fetch(`/api/`)\r\n        .then((res) => {\r\n            if (!res.ok) {\r\n                throw Error(res.statusText)\r\n            }\r\n            return res.text()\r\n        })\r\n        .then((data) => {\r\n            return JSON.parse(data)\r\n        })\r\n        .catch((err) => {\r\n            console.log('Error occurred while loading pokemons: ' + err)\r\n        })\r\n}\r\n\r\nlet loadImage = (name) => {\r\n\r\n    return fetch(`/api/icon/${name}`)\r\n        .then((res) => {\r\n            if (!res.ok) {\r\n                throw Error(res.statusText)\r\n            }\r\n            return res.text()\r\n        })\r\n        .then((data) => {\r\n            return data\r\n        })\r\n        .catch((err) => {\r\n            console.log('Error occurred while loading image: ' + err)\r\n        })\r\n}\r\n\r\n\r\nexport let loadPokemonsWithImages = (name) => {\r\n       return loadAllPokemons()\r\n      .then(data => {\r\n        let promisesArray = data.map( pokemon => {\r\n            return loadImage(pokemon[\"name\"].toLowerCase()).then(url => {\r\n                let image = null\r\n                const isExist = checkImage(url)\r\n                if (isExist) {\r\n                    debugger\r\n                      image = url\r\n                }\r\n\r\n                return {...pokemon, image};\r\n            });\r\n        })\r\n        return Promise.all(promisesArray);\r\n      })\r\n}\r\nexport let checkImage = (url) => {\r\n  const request = new XMLHttpRequest();\r\n  request.open(\"GET\", url, true);\r\n  request.send();\r\n  return request.onload = () => {\r\n    return (request.status === 200)\r\n  }\r\n}\r\n"],"mappings":"AAAA,IAAIA,eAAe,GAAG,MAAM;EACxB,OAAOC,KAAK,CAAE,OAAF,CAAL,CACFC,IADE,CACIC,GAAD,IAAS;IACX,IAAI,CAACA,GAAG,CAACC,EAAT,EAAa;MACT,MAAMC,KAAK,CAACF,GAAG,CAACG,UAAL,CAAX;IACH;;IACD,OAAOH,GAAG,CAACI,IAAJ,EAAP;EACH,CANE,EAOFL,IAPE,CAOIM,IAAD,IAAU;IACZ,OAAOC,IAAI,CAACC,KAAL,CAAWF,IAAX,CAAP;EACH,CATE,EAUFG,KAVE,CAUKC,GAAD,IAAS;IACZC,OAAO,CAACC,GAAR,CAAY,4CAA4CF,GAAxD;EACH,CAZE,CAAP;AAaH,CAdD;;AAgBA,IAAIG,SAAS,GAAIC,IAAD,IAAU;EAEtB,OAAOf,KAAK,CAAE,aAAYe,IAAK,EAAnB,CAAL,CACFd,IADE,CACIC,GAAD,IAAS;IACX,IAAI,CAACA,GAAG,CAACC,EAAT,EAAa;MACT,MAAMC,KAAK,CAACF,GAAG,CAACG,UAAL,CAAX;IACH;;IACD,OAAOH,GAAG,CAACI,IAAJ,EAAP;EACH,CANE,EAOFL,IAPE,CAOIM,IAAD,IAAU;IACZ,OAAOA,IAAP;EACH,CATE,EAUFG,KAVE,CAUKC,GAAD,IAAS;IACZC,OAAO,CAACC,GAAR,CAAY,yCAAyCF,GAArD;EACH,CAZE,CAAP;AAaH,CAfD;;AAkBA,OAAO,IAAIK,sBAAsB,GAAID,IAAD,IAAU;EACvC,OAAOhB,eAAe,GACtBE,IADO,CACFM,IAAI,IAAI;IACZ,IAAIU,aAAa,GAAGV,IAAI,CAACW,GAAL,CAAUC,OAAO,IAAI;MACrC,OAAOL,SAAS,CAACK,OAAO,CAAC,MAAD,CAAP,CAAgBC,WAAhB,EAAD,CAAT,CAAyCnB,IAAzC,CAA8CoB,GAAG,IAAI;QACxD,IAAIC,KAAK,GAAG,IAAZ;QACA,MAAMC,OAAO,GAAGC,UAAU,CAACH,GAAD,CAA1B;;QACA,IAAIE,OAAJ,EAAa;UACT;UACED,KAAK,GAAGD,GAAR;QACL;;QAED,OAAO,EAAC,GAAGF,OAAJ;UAAaG;QAAb,CAAP;MACH,CATM,CAAP;IAUH,CAXmB,CAApB;IAYA,OAAOG,OAAO,CAACC,GAAR,CAAYT,aAAZ,CAAP;EACD,CAfO,CAAP;AAgBN,CAjBM;AAkBP,OAAO,IAAIO,UAAU,GAAIH,GAAD,IAAS;EAC/B,MAAMM,OAAO,GAAG,IAAIC,cAAJ,EAAhB;EACAD,OAAO,CAACE,IAAR,CAAa,KAAb,EAAoBR,GAApB,EAAyB,IAAzB;EACAM,OAAO,CAACG,IAAR;EACA,OAAOH,OAAO,CAACI,MAAR,GAAiB,MAAM;IAC5B,OAAQJ,OAAO,CAACK,MAAR,KAAmB,GAA3B;EACD,CAFD;AAGD,CAPM"},"metadata":{},"sourceType":"module"}